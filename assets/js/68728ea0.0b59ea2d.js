"use strict";(self.webpackChunkwebsite_efi=self.webpackChunkwebsite_efi||[]).push([[2820],{3905:function(e,a,t){t.d(a,{Zo:function(){return u},kt:function(){return f}});var o=t(7294);function n(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);a&&(o=o.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,o)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach((function(a){n(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function l(e,a){if(null==e)return{};var t,o,n=function(e,a){if(null==e)return{};var t,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],a.indexOf(t)>=0||(n[t]=e[t]);return n}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var s=o.createContext({}),c=function(e){var a=o.useContext(s),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},u=function(e){var a=c(e.components);return o.createElement(s.Provider,{value:a},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var a=e.children;return o.createElement(o.Fragment,{},a)}},m=o.forwardRef((function(e,a){var t=e.components,n=e.mdxType,r=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=c(t),m=n,f=d["".concat(s,".").concat(m)]||d[m]||p[m]||r;return t?o.createElement(f,i(i({ref:a},u),{},{components:t})):o.createElement(f,i({ref:a},u))}));function f(e,a){var t=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var r=t.length,i=new Array(r);i[0]=m;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l[d]="string"==typeof e?e:n,i[1]=l;for(var c=2;c<r;c++)i[c]=t[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,t)}m.displayName="MDXCreateElement"},5162:function(e,a,t){t.d(a,{Z:function(){return i}});var o=t(7294),n=t(6010),r={tabItem:"tabItem_Ymn6"};function i(e){var a=e.children,t=e.hidden,i=e.className;return o.createElement("div",{role:"tabpanel",className:(0,n.Z)(r.tabItem,i),hidden:t},a)}},4866:function(e,a,t){t.d(a,{Z:function(){return C}});var o=t(7462),n=t(7294),r=t(6010),i=t(2466),l=t(6550),s=t(1980),c=t(7392),u=t(12);function d(e){return function(e){var a,t;return null!=(a=null==(t=n.Children.map(e,(function(e){if(!e||(0,n.isValidElement)(e)&&(a=e.props)&&"object"==typeof a&&"value"in a)return e;var a;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:t.filter(Boolean))?a:[]}(e).map((function(e){var a=e.props;return{value:a.value,label:a.label,attributes:a.attributes,default:a.default}}))}function p(e){var a=e.values,t=e.children;return(0,n.useMemo)((function(){var e=null!=a?a:d(t);return function(e){var a=(0,c.l)(e,(function(e,a){return e.value===a.value}));if(a.length>0)throw new Error('Docusaurus error: Duplicate values "'+a.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[a,t])}function m(e){var a=e.value;return e.tabValues.some((function(e){return e.value===a}))}function f(e){var a=e.queryString,t=void 0!==a&&a,o=e.groupId,r=(0,l.k6)(),i=function(e){var a=e.queryString,t=void 0!==a&&a,o=e.groupId;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!o)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=o?o:null}({queryString:t,groupId:o});return[(0,s._X)(i),(0,n.useCallback)((function(e){if(i){var a=new URLSearchParams(r.location.search);a.set(i,e),r.replace(Object.assign({},r.location,{search:a.toString()}))}}),[i,r])]}function k(e){var a,t,o,r,i=e.defaultValue,l=e.queryString,s=void 0!==l&&l,c=e.groupId,d=p(e),k=(0,n.useState)((function(){return function(e){var a,t=e.defaultValue,o=e.tabValues;if(0===o.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:o}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+t+'" but none of its children has the corresponding value. Available values are: '+o.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return t}var n=null!=(a=o.find((function(e){return e.default})))?a:o[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:i,tabValues:d})})),g=k[0],b=k[1],v=f({queryString:s,groupId:c}),h=v[0],P=v[1],C=(a=function(e){return e?"docusaurus.tab."+e:null}({groupId:c}.groupId),t=(0,u.Nk)(a),o=t[0],r=t[1],[o,(0,n.useCallback)((function(e){a&&r.set(e)}),[a,r])]),x=C[0],y=C[1],T=function(){var e=null!=h?h:x;return m({value:e,tabValues:d})?e:null}();return(0,n.useLayoutEffect)((function(){T&&b(T)}),[T]),{selectedValue:g,selectValue:(0,n.useCallback)((function(e){if(!m({value:e,tabValues:d}))throw new Error("Can't select invalid tab value="+e);b(e),P(e),y(e)}),[P,y,d]),tabValues:d}}var g=t(2389),b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function v(e){var a=e.className,t=e.block,l=e.selectedValue,s=e.selectValue,c=e.tabValues,u=[],d=(0,i.o5)().blockElementScrollPositionUntilNextRender,p=function(e){var a=e.currentTarget,t=u.indexOf(a),o=c[t].value;o!==l&&(d(a),s(o))},m=function(e){var a,t=null;switch(e.key){case"Enter":p(e);break;case"ArrowRight":var o,n=u.indexOf(e.currentTarget)+1;t=null!=(o=u[n])?o:u[0];break;case"ArrowLeft":var r,i=u.indexOf(e.currentTarget)-1;t=null!=(r=u[i])?r:u[u.length-1]}null==(a=t)||a.focus()};return n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":t},a)},c.map((function(e){var a=e.value,t=e.label,i=e.attributes;return n.createElement("li",(0,o.Z)({role:"tab",tabIndex:l===a?0:-1,"aria-selected":l===a,key:a,ref:function(e){return u.push(e)},onKeyDown:m,onClick:p},i,{className:(0,r.Z)("tabs__item",b.tabItem,null==i?void 0:i.className,{"tabs__item--active":l===a})}),null!=t?t:a)})))}function h(e){var a=e.lazy,t=e.children,o=e.selectedValue,r=(Array.isArray(t)?t:[t]).filter(Boolean);if(a){var i=r.find((function(e){return e.props.value===o}));return i?(0,n.cloneElement)(i,{className:"margin-top--md"}):null}return n.createElement("div",{className:"margin-top--md"},r.map((function(e,a){return(0,n.cloneElement)(e,{key:a,hidden:e.props.value!==o})})))}function P(e){var a=k(e);return n.createElement("div",{className:(0,r.Z)("tabs-container",b.tabList)},n.createElement(v,(0,o.Z)({},e,a)),n.createElement(h,(0,o.Z)({},e,a)))}function C(e){var a=(0,g.Z)();return n.createElement(P,(0,o.Z)({key:String(a)},e))}},4695:function(e,a,t){t.d(a,{GA:function(){return u},N1:function(){return i},T7:function(){return d},ZP:function(){return r},d6:function(){return c},jS:function(){return l},mj:function(){return s}});var o=t(7294),n=t(2949);function r(e){var a=e.children,t=e.backgroundColor,n=e.color;return o.createElement("span",{style:{backgroundColor:t,color:n,borderRadius:"12px",padding:"3px 10px 3px 10px",fontSize:"15px"}},a)}function i(e){return r({children:e.children,backgroundColor:"rgba(87,167,59,0.4)",color:"dark"===(0,n.I)().colorMode?"rgba(162,222,142,1)":"rgba(36,121,7,1)"})}function l(e){return r({children:e.children,backgroundColor:"rgba(243,156,18,0.4)",color:"dark"===(0,n.I)().colorMode?"rgba(252,213,151,1)":"rgba(166,102,0,1)"})}function s(e){return r({children:e.children,backgroundColor:"rgba(179,228,163,0.4)",color:"dark"===(0,n.I)().colorMode?"rgba(162,222,142,1)":"rgba(36,121,7,1)"})}function c(e){return r({children:e.children,backgroundColor:"rgba(11,161,194,0.4)",color:"dark"===(0,n.I)().colorMode?"rgba(119,214,234,1)":"rgba(0,97,119,1)"})}function u(e){return r({children:e.children,backgroundColor:"rgba(253,132,128,0.4)",color:"dark"===(0,n.I)().colorMode?"rgba(255,176,173,1)":"rgba(217,30,24,1)"})}function d(e){return r({children:e.children,color:"rgba(243,112,33,1)"})}},8531:function(e,a,t){t.r(a),t.d(a,{assets:function(){return m},contentTitle:function(){return d},default:function(){return b},frontMatter:function(){return u},metadata:function(){return p},toc:function(){return f}});var o=t(7462),n=t(3366),r=(t(7294),t(3905)),i=t(4866),l=t(5162),s=t(4695),c=["components"],u={id:"Credenciais",title:"Credenciais, Certificado e Autoriza\xe7\xe3o",hide_title:!0,sidebar_label:"Credenciais, Certificado e Autoriza\xe7\xe3o"},d=void 0,p={unversionedId:"APIPix/Credenciais",id:"APIPix/Credenciais",title:"Credenciais, Certificado e Autoriza\xe7\xe3o",description:"Credenciais, Certificado e Autoriza\xe7\xe3o",source:"@site/docs/APIPix/Credenciais.md",sourceDirName:"APIPix",slug:"/APIPix/Credenciais",permalink:"/docs/APIPix/Credenciais",draft:!1,tags:[],version:"current",frontMatter:{id:"Credenciais",title:"Credenciais, Certificado e Autoriza\xe7\xe3o",hide_title:!0,sidebar_label:"Credenciais, Certificado e Autoriza\xe7\xe3o"},sidebar:"someSidebar",previous:{title:"Introdu\xe7\xe3o",permalink:"/docs/APIPix/Introducao"},next:{title:"Cobrancas imediatas",permalink:"/docs/APIPix/CobrancasImediatas"}},m={},f=[{value:"Obtendo as credenciais da aplica\xe7\xe3o",id:"obtendo-as-credenciais-da-aplica\xe7\xe3o",level:2},{value:"Entendendo os escopos de aplica\xe7\xe3o",id:"entendendo-os-escopos-de-aplica\xe7\xe3o",level:3},{value:"Criar uma aplica\xe7\xe3o ou configurar uma j\xe1 existente",id:"criar-uma-aplica\xe7\xe3o-ou-configurar-uma-j\xe1-existente",level:3},{value:"Gerando um certificado P12",id:"gerando-um-certificado-p12",level:2},{value:"Convers\xe3o de certificado P12 para o formato PEM",id:"convers\xe3o-de-certificado-p12-para-o-formato-pem",level:3},{value:"Rotas base",id:"rotas-base",level:2},{value:"Autoriza\xe7\xe3o com OAuth2",id:"autoriza\xe7\xe3o-com-oauth2",level:2},{value:"Configurando o Postman para testes",id:"configurando-o-postman-para-testes",level:2},{value:"1. Importando a Collection da API Pix",id:"1-importando-a-collection-da-api-pix",level:3},{value:"2. Criando um Environment",id:"2-criando-um-environment",level:3},{value:"3. Configurando o certificado no Postman",id:"3-configurando-o-certificado-no-postman",level:3},{value:"4. Atribuindo o Client_Id e Client_Secret no Postman",id:"4-atribuindo-o-client_id-e-client_secret-no-postman",level:3},{value:"Obter Autoriza\xe7\xe3o",id:"obter-autoriza\xe7\xe3o",level:2},{value:"Exemplos de autoriza\xe7\xe3o utilizando o certificado .P12",id:"exemplos-de-autoriza\xe7\xe3o-utilizando-o-certificado-p12",level:3},{value:"Exemplo de resposta da autoriza\xe7\xe3o",id:"exemplo-de-resposta-da-autoriza\xe7\xe3o",level:3}],k={toc:f},g="wrapper";function b(e){var a=e.components,t=(0,n.Z)(e,c);return(0,r.kt)(g,(0,o.Z)({},k,t,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h1",{className:"titulo"},"Credenciais, Certificado e Autoriza\xe7\xe3o"),(0,r.kt)("div",{className:"subtitulo"},(0,r.kt)("div",{className:"light"},"Informa\xe7\xf5es sobre credenciais, certificado e autoriza\xe7\xe3o da API Pix Ef\xed"),(0,r.kt)("hr",null),(0,r.kt)("p",null,"Para integrar a API Pix Ef\xed ao seu sistema ou sua plataforma, \xe9 necess\xe1rio ter uma Conta Digital Ef\xed."),(0,r.kt)("p",null,"N\xe3o tem conta?"),(0,r.kt)("a",{href:"https://app.sejaefi.com.br/",target:"_blank",alt:"QUERO UMA CONSULTORIA T\xc9CNICA"},(0,r.kt)("button",{type:"button",className:"buttonCTA buttonorange"},"Abra sua conta Gr\xe1tis")),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("p",null,"Uma vez com acesso, voc\xea poder\xe1 obter as credenciais e o certificado necess\xe1rios para a comunica\xe7\xe3o com a API Pix Ef\xed."),(0,r.kt)("p",null,"Veja a seguir como obter as credenciais, certificados e detalhes sobre a autoriza\xe7\xe3o e seguran\xe7a da sua integra\xe7\xe3o com a Ef\xed."),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"obtendo-as-credenciais-da-aplica\xe7\xe3o"},"Obtendo as credenciais da aplica\xe7\xe3o"),(0,r.kt)("p",null,"Um integrador pode criar quantas aplica\xe7\xf5es desejar. Para cada aplica\xe7\xe3o s\xe3o gerados 2 pares de chaves ",(0,r.kt)("code",null,"Client_Id")," e ",(0,r.kt)("code",null,"Client_Secret"),", sendo um par para utiliza\xe7\xe3o em ambiente de Produ\xe7\xe3o (",(0,r.kt)("a",{href:"/img/producao.jpg",target:"_blank"},"?"),") e outro para Homologa\xe7\xe3o (",(0,r.kt)("a",{href:"/img/homologacao.jpg",target:"_blank"},"?"),")."),(0,r.kt)("p",null,"Utilizando a API Pix Ef\xed, o integrador pode gerar transa\xe7\xf5es Pix (pagamentos e recebimentos), configurar Webhooks para o recebimento de notifica\xe7\xf5es via ",(0,r.kt)("em",{parentName:"p"},"callbacks")," e acessar as funcionalidades exclusivas da Conta Digital Ef\xed. Para isso, \xe9 necess\xe1rio ativar os escopos necess\xe1rios."),(0,r.kt)("h3",{id:"entendendo-os-escopos-de-aplica\xe7\xe3o"},"Entendendo os escopos de aplica\xe7\xe3o"),(0,r.kt)("p",null,"Ao criar ou editar uma aplica\xe7\xe3o em sua Conta Ef\xed, voc\xea precisar\xe1 configurar os escopos que a aplica\xe7\xe3o ter\xe1 acesso. A escolha desses escopos define quais a\xe7\xf5es uma aplica\xe7\xe3o estar\xe1 ",(0,r.kt)("strong",{parentName:"p"},"autorizada")," a realizar via API."),(0,r.kt)("p",null,"Os escopos dispon\xedveis na API Pix Ef\xed est\xe3o listados abaixo com suas respectivas descri\xe7\xf5es de permiss\xe3o:"),(0,r.kt)("ul",null,(0,r.kt)("li",null,(0,r.kt)("b",null,(0,r.kt)("code",null,"cob.write"))," - altera\xe7\xe3o de cobran\xe7as;"),(0,r.kt)("li",null,(0,r.kt)("b",null,(0,r.kt)("code",null,"cob.read"))," - consulta de cobran\xe7as;"),(0,r.kt)("li",null,(0,r.kt)("b",null,(0,r.kt)("code",null,"pix.write"))," - altera\xe7\xe3o de Pix;"),(0,r.kt)("li",null,(0,r.kt)("b",null,(0,r.kt)("code",null,"pix.read"))," - consulta de Pix;"),(0,r.kt)("li",null,(0,r.kt)("b",null,(0,r.kt)("code",null,"pix.send"))," - requisitar envio de Pix;"),(0,r.kt)("li",null,(0,r.kt)("b",null,(0,r.kt)("code",null,"webhook.write"))," - altera\xe7\xe3o do webhook;"),(0,r.kt)("li",null,(0,r.kt)("b",null,(0,r.kt)("code",null,"webhook.read"))," - consulta do webhook;"),(0,r.kt)("li",null,(0,r.kt)("b",null,(0,r.kt)("code",null,"payloadlocation.write"))," - criar location do payload;"),(0,r.kt)("li",null,(0,r.kt)("b",null,(0,r.kt)("code",null,"payloadlocation.read"))," - Permiss\xe3o para consulta de locations;"),(0,r.kt)("li",null,(0,r.kt)("b",null,(0,r.kt)("code",null,"gn.pix.send.read"))," - consultar Pix enviados;"),(0,r.kt)("li",null,(0,r.kt)("b",null,(0,r.kt)("code",null,"gn.pix.evp.write"))," - criar/remover chave evp;"),(0,r.kt)("li",null,(0,r.kt)("b",null,(0,r.kt)("code",null,"gn.pix.evp.read"))," - listar chave evp;"),(0,r.kt)("li",null,(0,r.kt)("b",null,(0,r.kt)("code",null,"gn.balance.read"))," - buscar saldo da conta;"),(0,r.kt)("li",null,(0,r.kt)("b",null,(0,r.kt)("code",null,"gn.settings.write"))," - criar/modificar configura\xe7\xf5es da conta;"),(0,r.kt)("li",null,(0,r.kt)("b",null,(0,r.kt)("code",null,"gn.settings.read"))," - listar configura\xe7\xf5es da conta;")),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"criar-uma-aplica\xe7\xe3o-ou-configurar-uma-j\xe1-existente"},"Criar uma aplica\xe7\xe3o ou configurar uma j\xe1 existente"),(0,r.kt)("p",null,"Veja como criar uma aplica\xe7\xe3o ou aproveitar uma aplica\xe7\xe3o j\xe1 existente para integrar com a API Pix Ef\xed."),(0,r.kt)(i.Z,{className:"tab",defaultValue:"Criar_uma_aplicacao",values:[{label:"Criar uma aplica\xe7\xe3o",value:"Criar_uma_aplicacao"},{label:"Aproveitar uma aplica\xe7\xe3o existente",value:"Aproveitar_uma_aplicacao_existente"}],mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"Criar_uma_aplicacao",mdxType:"TabItem"},(0,r.kt)("p",null," Para ",(0,r.kt)("strong",{parentName:"p"},"criar uma aplica\xe7\xe3o para utiliza\xe7\xe3o da API Pix")," siga os passos abaixo:"),(0,r.kt)("ol",null,(0,r.kt)("li",null,'Acesse sua conta e clique no item "API" na parte inferior do menu \xe0 esquerda da conta Ef\xed;'),(0,r.kt)("li",null,'Clique em "Criar aplica\xe7\xe3o"'),(0,r.kt)("li",null,"Habilite a API Pix e escolha os escopos que deseja liberar em ambiente de Produ\xe7\xe3o e Homologa\xe7\xe3o (voc\xea pode edit\xe1-los no futuro);"),(0,r.kt)("li",null,'Com os escopos selecionados, clique em "Continuar".')),(0,r.kt)("div",{className:"figure"},(0,r.kt)("img",{src:"/img/criacao_aplicacao_pix.png",alt:"banner"}),(0,r.kt)("p",null,"Ilustra\xe7\xe3o dos passos para a cria\xe7\xe3o de uma nova aplica\xe7\xe3o integrada \xe0 API Pix"))),(0,r.kt)(l.Z,{value:"Aproveitar_uma_aplicacao_existente",mdxType:"TabItem"},(0,r.kt)("p",null,"Para ",(0,r.kt)("strong",{parentName:"p"},"aproveitar uma aplica\xe7\xe3o j\xe1 cadastrada")," em sua conta e us\xe1-la para a integra\xe7\xe3o com Pix, siga os passos abaixo:"),(0,r.kt)("ol",null,(0,r.kt)("li",null,'Acesse sua conta e clique no item "API" na parte inferior do menu \xe0 esquerda da conta Ef\xed;'),(0,r.kt)("li",null,'Clique em "Aplica\xe7\xf5es". Em seguida, escolha a aplica\xe7\xe3o que ser\xe1 editada, clique nos tr\xeas pontinhos e depois em configura\xe7\xf5es;'),(0,r.kt)("li",null,"Habilite a API Pix e escolha os escopos que deseja liberar em ambiente de Produ\xe7\xe3o e Homologa\xe7\xe3o (voc\xea pode edit\xe1-los sempre que quiser);"),(0,r.kt)("li",null,'Com os escopos selecionados, clique em "Continuar".'),(0,r.kt)("br",null),(0,r.kt)("div",{className:"figure"},(0,r.kt)("img",{src:"/img/edicao_aplicacao_pix.png",alt:"banner"}),(0,r.kt)("p",null,"Passos at\xe9 a edi\xe7\xe3o de uma aplica\xe7\xe3o")),(0,r.kt)("br",null),(0,r.kt)("div",{className:"figure"},(0,r.kt)("img",{src:"/img/edicoes_para_aplicacao_pix.png",alt:"banner"}),(0,r.kt)("p",null,"Edi\xe7\xf5es necess\xe1rias para o acesso de uma aplica\xe7\xe3o \xe0 API Pix"))))),(0,r.kt)("h2",{id:"gerando-um-certificado-p12"},"Gerando um certificado P12"),(0,r.kt)("p",null,"Todas as requisi\xe7\xf5es devem conter um certificado de seguran\xe7a que ser\xe1 fornecido pela Ef\xed dentro da sua conta, no formato PFX(",(0,r.kt)("code",null,".p12"),"). Essa exig\xeancia est\xe1 descrita na \xedntegra no ",(0,r.kt)("a",{href:"https://www.bcb.gov.br/estabilidadefinanceira/comunicacaodados",target:"_blank"},"manual de seguran\xe7a do PIX"),"."),(0,r.kt)("p",null,"Para gerar o seu certificado, basta seguir os passos abaixo:"),(0,r.kt)("ol",null,(0,r.kt)("li",null,'Acesse o item "API" no menu inferior a esquerda da conta Ef\xed;'),(0,r.kt)("li",null,'No menu \xe0 esquerda, clique em "Meus Certificados";'),(0,r.kt)("li",null,"Na nova janela selecione o ambiente ao qual pertencer\xe1 o certificado (Produ\xe7\xe3o ou Homologa\xe7\xe3o)"),(0,r.kt)("li",null,'Clique em "Novo Certificado" (bot\xe3o azul);'),(0,r.kt)("li",null,"Atribua uma descri\xe7\xe3o ao certificado para identific\xe1-lo no futuro;"),(0,r.kt)("li",null,"Confirme a cria\xe7\xe3o do certificado;"),(0,r.kt)("li",null,"Por fim, baixe o certificado e clique em prosseguir.")),(0,r.kt)("p",null,"Os passos para a cria\xe7\xe3o de um certificado est\xe3o ilustrados na imagem a seguir."),(0,r.kt)("div",{className:"figure"},(0,r.kt)("img",{src:"/img/passos_para_criar_certificado.png",alt:"banner"}),(0,r.kt)("p",null,"Passos para a cria\xe7\xe3o do certificado")),(0,r.kt)("div",{className:"figure"},(0,r.kt)("img",{src:"/img/janela_criacao_certificado.png",alt:"banner"}),(0,r.kt)("p",null,"Janela para a cria\xe7\xe3o do certificado")),(0,r.kt)("div",{className:"figure"},(0,r.kt)("img",{src:"/img/download_certificado.png",alt:"banner"}),(0,r.kt)("p",null,"Janela de download do certificado gerado")),(0,r.kt)("div",{className:"admonition_caution"},(0,r.kt)("div",null,(0,r.kt)("img",{src:"/img/exclamation-triangle-orange.svg"})," ",(0,r.kt)("b",null,"Aten\xe7\xe3o!")),"O download do certificado \xe9 feito imediatamente ap\xf3s a sua cria\xe7\xe3o. N\xe3o ser\xe1 poss\xedvel realizar o download do mesmo certificado em outro momento, por isso, armazene-o em local seguro em seu computador."),(0,r.kt)("br",null),(0,r.kt)("p",null,"Vale ressaltar que ",(0,r.kt)("strong",{parentName:"p"},"um mesmo certificado pode ser usado por diversas aplica\xe7\xf5es")," da sua conta digital. Ainda assim, voc\xea pode gerar at\xe9 cinco certificados para cada ambiente (Produ\xe7\xe3o ou Homologa\xe7\xe3o)."),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"convers\xe3o-de-certificado-p12-para-o-formato-pem"},"Convers\xe3o de certificado P12 para o formato PEM"),(0,r.kt)("div",{className:"admonition_info"},(0,r.kt)("div",null,(0,r.kt)("img",{src:"/img/info-circle-blue.svg"})," ",(0,r.kt)("b",null,"Informa\xe7\xe3o")),"Em algumas linguagens as chaves precisar\xe3o ser convertidas para o formato ",(0,r.kt)("code",null,".pem.")," Utilize as informa\xe7\xf5es desta se\xe7\xe3o apenas se esse for o seu caso."),(0,r.kt)("br",null),(0,r.kt)("p",null,"\xc9 poss\xedvel converter o certificado utilizando o comando o OpenSSL para realizar essa convers\xe3o de formato entre as chaves:"),(0,r.kt)(i.Z,{defaultValue:"Shell",values:[{label:"Shell",value:"Shell"}],mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"Shell",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"}," # Gerar certificado e chave em \xfanico arquivo\nopenssl pkcs12 -in certificado.p12 -out certificado.pem -nodes\n")))),(0,r.kt)("br",null),(0,r.kt)("p",null,"Se for necess\xe1rio separar a chave privada do certificado durante a convers\xe3o, use o comando abaixo, tamb\xe9m com o OpenSSL:"),(0,r.kt)(i.Z,{defaultValue:"Shell",values:[{label:"Shell",value:"Shell"}],mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"Shell",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# Gerar certificado e chave separadas\nopenssl pkcs12 -in path.p12 -out newfile.crt.pem -clcerts -nokeys #certificado\nopenssl pkcs12 -in path.p12 -out newfile.key.pem -nocerts -nodes #chave privada\n")))),(0,r.kt)("br",null),(0,r.kt)("div",{className:"admonition_info"},(0,r.kt)("div",null,(0,r.kt)("img",{src:"/img/info-circle-blue.svg"})," ",(0,r.kt)("b",null,"Informa\xe7\xe3o")),"O processo de convers\xe3o do certificado pode pedir a ",(0,r.kt)("b",null,"senha do certificado"),". Se isso ocorrer, informe vazio."),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"rotas-base"},"Rotas base"),(0,r.kt)("p",null,"Nesta documenta\xe7\xe3o voc\xea perceber\xe1 refer\xeancias \xe0 Rotas base ou URL's base para ambientes de Produ\xe7\xe3o ou Homologa\xe7\xe3o. Essas rotas s\xe3o, na verdade, a URL na qual a API Pix Ef\xed se encontra. Assim, quando nos referirmos aos endpoints, fica impl\xedcito que esses trechos de URL tamb\xe9m comp\xf5em a rota final do recurso desejado."),(0,r.kt)("p",null,"Utilize as rotas abaixo para realizar a comunica\xe7\xe3o da sua aplica\xe7\xe3o com os ambientes de produ\xe7\xe3o\ne homologa\xe7\xe3o oferecidos pela Ef\xed."),(0,r.kt)("div",{className:"table"},(0,r.kt)("table",null,(0,r.kt)("tbody",null,(0,r.kt)("tr",null,(0,r.kt)("th",null,"Ambiente"),(0,r.kt)("th",null,"Rota base")),(0,r.kt)("tr",null,(0,r.kt)("td",null,"Produ\xe7\xe3o"),(0,r.kt)("td",null,(0,r.kt)("code",null,"https://api-pix.gerencianet.com.br"))),(0,r.kt)("tr",null,(0,r.kt)("td",null,"Homologa\xe7\xe3o"),(0,r.kt)("td",null,(0,r.kt)("code",null,"https://api-pix-h.gerencianet.com.br")))))),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"autoriza\xe7\xe3o-com-oauth2"},"Autoriza\xe7\xe3o com OAuth2"),(0,r.kt)("p",null,"O mecanismo de autoriza\xe7\xe3o das requisi\xe7\xf5es feitas \xe0 API Pix Ef\xed \xe9 compat\xedvel com ",(0,r.kt)("a",{href:"http://oauth.net/2/",target:"_blank"},"o protocolo OAuth 2.0"),". O objetivo do OAuth2 \xe9 a obten\xe7\xe3o de um token de acesso (",(0,r.kt)("code",null,"access_token"),"). Esse ",(0,r.kt)("code",null,"access_token")," \xe9 usado para autorizar todas as chamadas feitas \xe0 API, verificando se uma determinada aplica\xe7\xe3o tem permiss\xf5es para consumir o endpoint requisitado."),(0,r.kt)("p",null,"A autentica\xe7\xe3o das requisi\xe7\xf5es \xe9 feita com HTTP ",(0,r.kt)("a",{href:"https://en.wikipedia.org/wiki/Basic_access_authentication",target:"_blank"},"Basic Auth")," a partir do ",(0,r.kt)("code",null,"Client_Id")," e ",(0,r.kt)("code",null,"Client_Secret")," da aplica\xe7\xe3o criada em sua conta da Ef\xed."),(0,r.kt)("p",null,"Atrav\xe9s dessa autentica\xe7\xe3o o OAuth poder\xe1 responder quais as autoriza\xe7\xf5es que a aplica\xe7\xe3o tem e, consequentemente, autorizar ou negar as requisi\xe7\xf5es de acordo com essa informa\xe7\xe3o."),(0,r.kt)("div",{className:"admonition_caution"},(0,r.kt)("div",null,(0,r.kt)("img",{src:"/img/lightbulb-on-orange.svg"})," ",(0,r.kt)("b",null,"Aten\xe7\xe3o!")),"O Certificado P12/PEM gerado nos passos anteriores \xe9 ",(0,r.kt)("strong",null,"obrigat\xf3rio em todas as requisi\xe7\xf5es")," feitas \xe0 API Pix, inclusive na requisi\xe7\xe3o de autoriza\xe7\xe3o."),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"configurando-o-postman-para-testes"},"Configurando o Postman para testes"),(0,r.kt)("div",{className:"admonition_info"},(0,r.kt)("div",null,(0,r.kt)("img",{src:"/img/lightbulb-on-blue.svg"})," ",(0,r.kt)("b",null,"Dica")),"O uso do software Postman \xe9 opcional. Os pr\xf3ximos par\xe1grafos explicam como configur\xe1-lo. Caso n\xe3o deseje usar o Postman para testes, voc\xea pode avan\xe7ar para o pr\xf3ximo t\xf3pico: ",(0,r.kt)("a",{href:"#obter-autoriza\xe7\xe3o",target:"_self"}," Obter Autoriza\xe7\xe3o"),"."),(0,r.kt)("br",null),(0,r.kt)("p",null,"Para seguir com a etapa de configura\xe7\xe3o do Postman, voc\xea deve ter:"),(0,r.kt)("ol",null,(0,r.kt)("li",null,"Um par de credenciais ",(0,r.kt)("code",null,"Client_Id")," e ",(0,r.kt)("code",null,"Client_Secret")," de uma aplica\xe7\xe3o cadastrada em sua Conta Ef\xed;"),(0,r.kt)("li",null,"Um certificado P12/PEM gerado como ilustrado nas etapas anteriores;"),(0,r.kt)("li",null,"O software Postman instalado em seu computador (",(0,r.kt)("a",{href:"https://www.postman.com/downloads/",target:"_blank"},"Caso n\xe3o tenha, clique aqui para baixar"),");")),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"1-importando-a-collection-da-api-pix"},"1. Importando a Collection da API Pix"),(0,r.kt)("p",null,"Quando voc\xea tiver todos os requisitos acima, inicie a configura\xe7\xe3o do Postman pela importa\xe7\xe3o da ",(0,r.kt)("a",{href:"https://documenter.getpostman.com/view/13574984/Uz5ArJQX",target:"_blank"},(0,r.kt)("em",{parentName:"p"},"Collection")," da API Pix Ef\xed"),"."),(0,r.kt)("ol",null,(0,r.kt)("li",null,"Baixe o arquivo JSON da collection ",(0,r.kt)("a",{download:!0,href:"#",class:"lnk-collection-postman",target:"_blank"},"clicando aqui"),";"),(0,r.kt)("li",null,"Com o Postman iniciado, use o atalho Ctrl+O para abrir a tela de importa\xe7\xe3o;"),(0,r.kt)("li",null,"Selecione o arquivo da ",(0,r.kt)("em",null,"Collection"),";"),(0,r.kt)("li",null,"Por \xfaltimo, clique em ",(0,r.kt)("em",null,"Import"))),(0,r.kt)("div",{className:"figure"},(0,r.kt)("img",{src:"/img/import-collection-postman.png",alt:"banner"}),(0,r.kt)("p",null,"Ilustra\xe7\xe3o do in\xedcio do processo de importa\xe7\xe3o")),(0,r.kt)("div",{className:"figure"},(0,r.kt)("img",{src:"/img/import-collection-postman-2.png",alt:"banner"}),(0,r.kt)("p",null,"Ilustra\xe7\xe3o da importa\xe7\xe3o do arquivo")),(0,r.kt)("div",{className:"figure"},(0,r.kt)("img",{src:"/img/import-collection-postman-3.png",alt:"banner"}),(0,r.kt)("p",null,"Ilustra\xe7\xe3o da etapa final da importa\xe7\xe3o")),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"2-criando-um-environment"},"2. Criando um Environment"),(0,r.kt)("p",null,"A cria\xe7\xe3o de um ",(0,r.kt)("em",{parentName:"p"},"Environment")," no Postman \xe9 necess\xe1ria para que algumas automa\xe7\xf5es embutidas na collection funcionem. Essas automa\xe7\xf5es foram projetadas para dar mais facilidade aos desenvolvedores durante os testes."),(0,r.kt)("p",null,"Com elas voc\xea precisa solicitar a autoriza\xe7\xe3o apenas uma vez e, ent\xe3o, o ",(0,r.kt)("code",null,"access_token")," fica gravado como uma vari\xe1vel de ambiente (",(0,r.kt)("em",{parentName:"p"},"environment"),") do Postman, dispon\xedvel para utiliza\xe7\xe3o nas requisi\xe7\xf5es subsequentes."),(0,r.kt)("p",null,"Para criar um Environment siga os passos abaixo."),(0,r.kt)("ol",null,(0,r.kt)("li",null,"Acione o atalho ",(0,r.kt)("code",null,"Ctrl+N"),' e selecione "Environment";'),(0,r.kt)("li",null,"Atribua um nome preferencialmente especificando se esse Environment ser\xe1 apontado para o ambiente de Produ\xe7\xe3o ou Homologa\xe7\xe3o;"),(0,r.kt)("li",null,"Crie a vari\xe1vel ",(0,r.kt)("code",null,"gn-api-pix")," e como valor inicial (",(0,r.kt)("em",null,"Initial value"),") insira a URL da API Pix de Produ\xe7\xe3o ou Homologa\xe7\xe3o;"),(0,r.kt)("li",null,"Salve o seu Environment;"),(0,r.kt)("li",null,"Selecione o Environment desejado, assim o Postman entender\xe1 a vari\xe1vel criada.")),(0,r.kt)("p",null,"As imagens abaixo ilustram os passos acima. Como exemplo, foi criado um Environment apontado para o ambiente de Homologa\xe7\xe3o da API Pix Ef\xed."),(0,r.kt)("div",{className:"admonition_info"},(0,r.kt)("div",null,(0,r.kt)("img",{src:"/img/lightbulb-on-blue.svg"})," ",(0,r.kt)("b",null,"Dica")),"Repita os passos acima para dessa vez ter um Environment apontado para o ambiente de Produ\xe7\xe3o. Assim voc\xea poder\xe1 simplesmente alternar entre os Environments e suas requisi\xe7\xf5es j\xe1 estar\xe3o apontadas corretamente."),(0,r.kt)("br",null),(0,r.kt)("div",{className:"figure"},(0,r.kt)("img",{src:"/img/1-config-env-postman.png",alt:"banner"}),(0,r.kt)("p",null,"Criando um novo environment")),(0,r.kt)("div",{className:"figure"},(0,r.kt)("img",{src:"/img/2-config-env-postman.png",alt:"banner"}),(0,r.kt)("p",null,"Configura\xe7\xf5es do environment")),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"3-configurando-o-certificado-no-postman"},"3. Configurando o certificado no Postman"),(0,r.kt)("p",null,"Todas as requisi\xe7\xf5es feitas \xe0 API Pix Ef\xed precisam do certificado gerado em sua conta Ef\xed. Portanto, para facilitar seus testes utilizando o Postman, siga os passos abaixo para configurar o uso do certificado durante as requisi\xe7\xf5es de maneira autom\xe1tica:"),(0,r.kt)("ol",null,(0,r.kt)("li",null,"Clique no \xedcone de engrenagem no canto superior direito do Postman;"),(0,r.kt)("li",null,'Depois, clique em "Settings" para abrir as configura\xe7\xf5es;'),(0,r.kt)("li",null,'Na aba superior, clique em "Certificates";'),(0,r.kt)("li",null,'Em seguida, clique em "Add Certificate";'),(0,r.kt)("li",null,'Na janela de configura\xe7\xe3o do novo certificado, preencha o campo "Host" com a Rota base do ambiente ao qual o certificado pertence (Produ\xe7\xe3o ou Homologa\xe7\xe3o);'),(0,r.kt)("li",null,'Utilize o campo "PFX File" para informar ao Postman onde o arquivo do seu certificado P12/PEM se encontra;'),(0,r.kt)("li",null,'Finalize clicando em "Add" para salvar suas configura\xe7\xf5es.')),(0,r.kt)("p",null,"Seguindo esses passos, o Postman usar\xe1 o certificado para quaisquer requisi\xe7\xf5es feitas ao Host do ambiente configurado."),(0,r.kt)("div",{className:"admonition_info"},(0,r.kt)("div",null,(0,r.kt)("img",{src:"/img/lightbulb-on-blue.svg"})," ",(0,r.kt)("b",null,"Dica")),"\xc9 ideal que voc\xea configure o certificado do ambiente de homologa\xe7\xe3o, mas voc\xea tamb\xe9m pode repetir os passos acima para configurar o Postman com um certificado para o ambiente de Produ\xe7\xe3o."),(0,r.kt)("br",null),(0,r.kt)("p",null,"As imagens abaixo ilustram o passo a passo da configura\xe7\xe3o do certificado."),(0,r.kt)("div",{className:"figure"},(0,r.kt)("img",{src:"/img/1-add-cert-postman.png",alt:"banner"}),(0,r.kt)("p",null,"Acessando as configura\xe7\xf5es do Postman")),(0,r.kt)("div",{className:"figure"},(0,r.kt)("img",{src:"/img/2-add-cert-postman.png",alt:"banner"}),(0,r.kt)("p",null,"Adicionando um novo certificado no Postman")),(0,r.kt)("div",{className:"figure"},(0,r.kt)("img",{src:"/img/3-add-cert-postman.png",alt:"banner"}),(0,r.kt)("p",null,"Configura\xe7\xf5es do certificado")),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"4-atribuindo-o-client_id-e-client_secret-no-postman"},"4. Atribuindo o Client_Id e Client_Secret no Postman"),(0,r.kt)("p",null,"Para finalizar a configura\xe7\xe3o do seu Postman \xe9 necess\xe1rio configurar as credenciais de uma aplica\xe7\xe3o da sua conta Ef\xed. Essas credenciais s\xe3o usadas para o Basic Auth e obten\xe7\xe3o do ",(0,r.kt)("code",null,"access_token")," junto ao OAuth."),(0,r.kt)("p",null,"Siga os passos abaixo para incluir as credenciais e realizar o seu primeiro teste na API Pix Ef\xed."),(0,r.kt)("ol",null,(0,r.kt)("li",null,"Na collection importada, navegue at\xe9 a rota ",(0,r.kt)("code",null,"/oauth/token")," e clique duas vezes para abrir;"),(0,r.kt)("li",null,'Acesse o menu "Authorization" e certifique-se de que o "Type" (tipo de autoriza\xe7\xe3o) esteja selecionado como "Basic Auth";'),(0,r.kt)("li",null,'Nos campos "username" e "password" preencha com as credenciais da sua aplica\xe7\xe3o, Client_Id e Client_Secret, respectivamente;'),(0,r.kt)("li",null,'Para testar, clique no bot\xe3o "Send" para submeter a requisi\xe7\xe3o')),(0,r.kt)("p",null,"A imagem abaixo ilustra os passos acima. Se tudo foi seguido corretamente, voc\xea deve obter uma resposta em formato JSON, contendo o ",(0,r.kt)("code",null,"access_token"),", ",(0,r.kt)("code",null,"token_type"),", ",(0,r.kt)("code",null,"expires_in")," e ",(0,r.kt)("code",null,"scope")," (como na imagem abaixo)."),(0,r.kt)("div",{className:"figure"},(0,r.kt)("img",{src:"/img/request-auth-postman.png",alt:"banner"}),(0,r.kt)("p",null,"Uso das credenciais de uma aplica\xe7\xe3o para autoriza\xe7\xe3o de requisi\xe7\xf5es")),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"obter-autoriza\xe7\xe3o"},"Obter Autoriza\xe7\xe3o"),(0,r.kt)("div",{className:"auth"},(0,r.kt)("b",null,(0,r.kt)(s.N1,{mdxType:"HighlightPost"},"POST")," /oauth/token")),(0,r.kt)("br",null),"Este endpoint \xe9 utilizado para autorizar as credenciais de uma aplica\xe7\xe3o e obter os escopos que a aplica\xe7\xe3o possui para acessar os outros endpoints da API. \xc9 necess\xe1rio que o certificado P12/PEM esteja presente na requisi\xe7\xe3o de autoriza\xe7\xe3o a fim de que o handshake com o servidor da API seja permitido.",(0,r.kt)("br",null)," ",(0,r.kt)("br",null),(0,r.kt)("h3",{id:"exemplos-de-autoriza\xe7\xe3o-utilizando-o-certificado-p12"},"Exemplos de autoriza\xe7\xe3o utilizando o certificado .P12"),(0,r.kt)("p",null,"Para fazer requisi\xe7\xf5es HTTP utilizando certificados .P12 ou .PEM para autoriza\xe7\xe3o do Pix \xe9 necess\xe1rio que a chave seja inserida na requisi\xe7\xe3o."),(0,r.kt)("p",null,"Para a utiliza\xe7\xe3o do Pix \xe9 necess\xe1rio que o cliente e o servidor se comuniquem em uma conex\xe3o verificada um com o outro. A verifica\xe7\xe3o \xe9 feita pelo certificado bidirecional (.PEM ou .P12), isto \xe9, o servidor e o cliente implementaram um certificado de chave privada e um certificado de chave p\xfablica que permite que um possa assegurar-se da identidade do outro."),(0,r.kt)("p",null,"Por isso para fazer qualquer requisi\xe7\xe3o HTTP \xe0 API Pix, incluindo a requisi\xe7\xe3o de autoriza\xe7\xe3o junto ao OAuth2, \xe9 necess\xe1rio que o certificado .P12, ou .PEM, esteja presente nos cabe\xe7alhos da requisi\xe7\xe3o."),(0,r.kt)("p",null,"Abaixo, trazemos exemplos de como consumir a autoriza\xe7\xe3o da API Pix Ef\xed, incorporando esse certificado na requisi\xe7\xe3o."),(0,r.kt)(i.Z,{defaultValue:"PHP",values:[{label:"PHP",value:"PHP"},{label:"Node",value:"Node"},{label:"Python",value:"Python"},{label:".Net",value:".Net"},{label:"Ruby",value:"Ruby"},{label:"Java",value:"Java"},{label:"Go",value:"Go"}],mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"PHP",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},'//Desenvolvido pela Consultoria T\xe9cnica da Ef\xed\n<?php \n\n$config = [\n  "certificado" => "./certificado.pem",\n  "client_id" => "YOUR-CLIENT-ID",\n  "client_secret" => "YOUR-CLIENT-SECRET"\n];\n$autorizacao =  base64_encode($config["client_id"] . ":" . $config["client_secret"]);\n\n$curl = curl_init();\n\ncurl_setopt_array($curl, array(\n    CURLOPT_URL => "https://api-pix-h.gerencianet.com.br/oauth/token", // Rota base, homologa\xe7\xe3o ou produ\xe7\xe3o\n    CURLOPT_RETURNTRANSFER => true,\n    CURLOPT_ENCODING => "",\n    CURLOPT_MAXREDIRS => 10,\n    CURLOPT_TIMEOUT => 0,\n    CURLOPT_FOLLOWLOCATION => true,\n    CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,\n    CURLOPT_CUSTOMREQUEST => "POST",\n    CURLOPT_POSTFIELDS => \'{"grant_type": "client_credentials"}\',\n    CURLOPT_SSLCERT => $config["certificado"], // Caminho do certificado\n    CURLOPT_SSLCERTPASSWD => "",\n    CURLOPT_HTTPHEADER => array(\n        "Authorization: Basic $autorizacao",\n        "Content-Type: application/json"\n    ),\n));\n\n$response = curl_exec($curl);\n\ncurl_close($curl);\n\necho "<pre>";\necho $response;\necho "</pre>";\n?>\n'))),(0,r.kt)(l.Z,{value:"Node",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'//Desenvolvido pela Consultoria T\xe9cnica da Ef\xed\n\n"use strict";\nconst https = require("https");\nvar axios = require("axios");\nvar fs = require("fs");\n\n//Insira o caminho de seu certificado .p12 dentro de seu projeto\nvar certificado = fs.readFileSync("./certificado.p12");\n\n//Insira os valores de suas credenciais em desenvolvimento do pix\nvar credenciais = {\nclient_id: "YOUR-CLIENT-ID",\nclient_secret: "YOUR-CLIENT-SECRET",\n};\n\nvar data = JSON.stringify({ grant_type: "client_credentials" });\nvar data_credentials = credenciais.client_id + ":" + credenciais.client_secret;\n\n// Codificando as credenciais em base64\nvar auth = Buffer.from(data_credentials).toString("base64");\n\nconst agent = new https.Agent({\npfx: certificado,\npassphrase: "",\n});\n//Consumo em desenvolvimento da rota post oauth/token\nvar config = {\nmethod: "POST",\nurl: "https://api-pix-h.gerencianet.com.br/oauth/token",\nheaders: {\n  Authorization: "Basic " + auth,\n  "Content-Type": "application/json",\n},\nhttpsAgent: agent,\ndata: data,\n};\n\naxios(config)\n.then(function (response) {\n  console.log(JSON.stringify(response.data));\n})\n.catch(function (error) {\n  console.log(error);\n});\n'))),(0,r.kt)(l.Z,{value:"Python",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'#Desenvolvido pela Consultoria T\xe9cnica da Gerencianet\n\nimport requests\nimport base64\n\ncredentials = {\n  "client_id": "YOUR-CLIENT-ID",\n  "client_secret": "YOUR-CLIENT-SECRET",\n}\n\ncertificado = \'./certificado.pem\'  # A vari\xe1vel certificado \xe9 o diret\xf3rio em que seu certificado em formato .pem deve ser inserido\n\nauth = base64.b64encode(\n  (f"{credentials[\'client_id\']}:{credentials[\'client_secret\']}"\n   ).encode()).decode()\n\nurl = "https://api-pix-h.gerencianet.com.br/oauth/token"  #Para ambiente de Desenvolvimento\n\npayload="{\\r\\n    \\"grant_type\\": \\"client_credentials\\"\\r\\n}"\nheaders = {\n  \'Authorization\': f"Basic {auth}",\n  \'Content-Type\': \'application/json\'\n}\n\nresponse = requests.request("POST",\n                          url,\n                          headers=headers,\n                          data=payload,\n                          cert=certificado)\n\nprint(response.text)\n'))),(0,r.kt)(l.Z,{value:".Net",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},'//Desenvolvido pela Consultoria T\xe9cnica da Ef\xed\n\nusing System;\nusing System.Security.Cryptography.X509Certificates;\nusing System.Collections.Generic;\nusing RestSharp;\n\nnamespace PixGerencianet\n{\n  class Authorize\n  {\n      public static string Base64Encode(string plainText)\n      {\n          var plainTextBytes = System.Text.Encoding.UTF8.GetBytes(plainText);\n          return System.Convert.ToBase64String(plainTextBytes);\n      }\n\n      static void Main(string[] args)\n      {\n\n          var credencials = new Dictionary<string, string>{\n              {"client_id", "YOUR-CLIENT-ID"},\n              {"client_secret", "YOUR-CLIENT-SECRET"}\n          };\n          var authorization = Base64Encode(credencials["client_id"] + ":" + credencials["client_secret"]);\n          var client = new RestSharp.RestClient("https://api-pix-h.gerencianet.com.br/oauth/token");\n          var request = new RestRequest(Method.POST);\n\n          X509Certificate2 uidCert = new X509Certificate2("./certificado.p12", "");\n          client.ClientCertificates = new X509CertificateCollection() { uidCert };\n\n          request.AddHeader("Authorization", "Basic " + authorization);\n          request.AddHeader("Content-Type", "application/json");\n          request.AddParameter("application/json", "{\\r\\n    \\"grant_type\\": \\"client_credentials\\"\\r\\n}", ParameterType.RequestBody);\n          \n          IRestResponse restResponse = client.Execute(request);\n          string response = restResponse.Content;\n\n          Console.WriteLine(response);\n      }\n  }\n}\n'))),(0,r.kt)(l.Z,{value:"Ruby",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ruby"},'#Desenvolvido pela Consultoria T\xe9cnica da Gerencianet\n\nrequire "uri"\nrequire "net/http"\nrequire "openssl"\n\nclient_id = "YOUR-CLIENT-ID";\nclient_secret = "YOUR-CLIENT-SECRET";\n\ncertfile = File.read("certificado.pem") # A vari\xe1vel certfile \xe9 o diret\xf3rio em que seu certificado em formato .pem deve ser inserido\n\nurl = URI("https://api-pix-h.gerencianet.com.br/oauth/token") #Para ambiente de Desenvolvimento\n\nhttps = Net::HTTP.new(url.host, url.port);\nhttps.use_ssl = true\nhttps.cert = OpenSSL::X509::Certificate.new(certfile)\nhttps.key = OpenSSL::PKey::RSA.new(certfile)\n\nrequest = Net::HTTP::Post.new(url)\nrequest.basic_auth(client_id, client_secret)\nrequest["Content-Type"] = "application/json"\nrequest.body = "{\\r\\n    \\"grant_type\\": \\"client_credentials\\"\\r\\n}"\n\nresponse = https.request(request)\nputs response.read_body\n'))),(0,r.kt)(l.Z,{value:"Java",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'//Desenvolvido pela Consultoria T\xe9cnica da Ef\xed\n\nimport java.io.BufferedReader;\nimport java.io.InputStreamReader;\nimport java.io.OutputStream;\nimport java.net.URL;\nimport java.util.Base64;\n\nimport javax.net.ssl.HttpsURLConnection;\nimport javax.net.ssl.SSLSocketFactory;\n\npublic class Auth {\n  public static void main(String[] args) throws Exception {\n      String client_id = "YOUR-CLIENT-ID";\n      String client_secret = "YOUR-CLIENT-SECRET";;\n      String basicAuth = Base64.getEncoder().encodeToString(((client_id+\':\'+client_secret).getBytes()));\n    \n      //Diret\xf3rio em que seu certificado em formato .p12 deve ser inserido\n      System.setProperty("javax.net.ssl.keyStore", "certificado.p12"); \n      SSLSocketFactory sslsocketfactory = (SSLSocketFactory) SSLSocketFactory.getDefault();\n      \n      URL url = new URL ("https://api-pix-h.gerencianet.com.br/oauth/token"); //Para ambiente de Desenvolvimento              \n      HttpsURLConnection conn = (HttpsURLConnection)url.openConnection();\n      conn.setDoOutput(true);\n      conn.setRequestMethod("POST");\n      conn.setRequestProperty("Content-Type", "application/json");\n      conn.setRequestProperty("Authorization", "Basic "+ basicAuth);\n      conn.setSSLSocketFactory(sslsocketfactory);\n      String input = "{\\"grant_type\\": \\"client_credentials\\"}";\n     \n      OutputStream os = conn.getOutputStream();\n      os.write(input.getBytes());\n      os.flush();     \n\n      InputStreamReader reader = new InputStreamReader(conn.getInputStream());\n      BufferedReader br = new BufferedReader(reader);\n\n      String response;\n      while ((response = br.readLine()) != null) {\n        System.out.println(response);\n      }\n      conn.disconnect();\n\n  }\n}\n'))),(0,r.kt)(l.Z,{value:"Go",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'//Desenvolvido pela Consultoria T\xe9cnica da Ef\xed\npackage main\n\nimport (\n"fmt"\n"strings"\n"net/http"\n"io/ioutil"\n"crypto/tls"\n)\n\nconst(\nclient_id = "YOUR-CLIENT-ID"\nclient_secret = "YOUR-CLIENT-SECRET"\n)\n\nfunc main() {\n\nurl := "https://api-pix.gerencianet.com.br/oauth/token"// Rota base, homologa\xe7\xe3o ou produ\xe7\xe3o\nmethod := "POST"\n\npayload := strings.NewReader(`{"grant_type": "client_credentials"}`)\n\n\ncert, _ := tls.LoadX509KeyPair("CA.crt.pem", "KEY.crt.pem")// Seu certificado e chave privada gerada a partir dos comandos de convers\xe3o OpenSSL\n\nclient := &http.Client{\n  Transport: &http.Transport{\n      TLSClientConfig: &tls.Config{\n          Certificates: []tls.Certificate{cert},\n      },\n  },\n}\n\nreq, err := http.NewRequest(method, url, payload)\n\nif err != nil {\n  fmt.Println(err)\n  return\n}\nreq.SetBasicAuth(client_id, client_secret)\nreq.Header.Add("Content-Type", "application/json")\n\nres, err := client.Do(req)\nif err != nil {\n  fmt.Println(err)\n  return\n}\ndefer res.Body.Close()\n\nbody, err := ioutil.ReadAll(res.Body)\nif err != nil {\n  fmt.Println(err)\n  return\n}\nfmt.Println(string(body))\n}\n')))),(0,r.kt)("h3",{id:"exemplo-de-resposta-da-autoriza\xe7\xe3o"},"Exemplo de resposta da autoriza\xe7\xe3o"),(0,r.kt)("p",null,"O trecho de c\xf3digo abaixo representa um exemplo de resposta do OAuth \xe0 sua requisi\xe7\xe3o de autoriza\xe7\xe3o."),(0,r.kt)(i.Z,{className:"tab",defaultValue:"Resposta",values:[{label:"Resposta",value:"Resposta"}],mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"Resposta",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n   "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",\n   "token_type": "Bearer",\n   "expires_in": 3600,\n   "scope": "cob.read cob.write pix.read pix.write"\n}\n')))),(0,r.kt)("br",null),(0,r.kt)("p",null,"A tabela abaixo descreve os atributos presentes no JSON retornado."),(0,r.kt)("table",{className:"table"},(0,r.kt)("tbody",null,(0,r.kt)("tr",null,(0,r.kt)("th",null,"Atributo"),(0,r.kt)("th",{align:"center"},"Descri\xe7\xe3o"),(0,r.kt)("th",{align:"center"},"Tipo")),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("b",null,"access_token")),(0,r.kt)("td",{align:"left"},"Token de autoriza\xe7\xe3o a ser usado nas outras requisi\xe7\xf5es feitas \xe0 API."),(0,r.kt)("td",null,"string")),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("b",null,"token_type")),(0,r.kt)("td",{align:"left"},"Tipo de autoriza\xe7\xe3o na qual o ",(0,r.kt)("code",null,"access_token")," deve ser usado",(0,r.kt)("br",null),(0,r.kt)("strong",null,"Padr\xe3o"),': "Bearer"'),(0,r.kt)("td",null,"string")),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("b",null,"expires_in")),(0,r.kt)("td",{align:"left"},"Tempo de expira\xe7\xe3o do ",(0,r.kt)("code",null,"access_token")," em segundos.",(0,r.kt)("br",null),(0,r.kt)("strong",null,"Padr\xe3o")," 3600"),(0,r.kt)("td",null,"string")),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("b",null,"scope")),(0,r.kt)("td",{align:"left"},"Lista de escopos aos quais a aplica\xe7\xe3o autorizada possui acesso. Os escopos est\xe3o separados por espa\xe7o."),(0,r.kt)("td",null,"string")))),(0,r.kt)("br",null)))}b.isMDXComponent=!0}}]);